(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99686,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(91751),n=e.i(51977),l=e.i(75254);let r=(0,l.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),o=(0,l.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var i=e.i(73708);let d=(0,l.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var c=e.i(78716);let m=(0,l.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),x=(0,l.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,l.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var h=e.i(65960),b=e.i(37727);let p=(0,l.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var g=e.i(73375),f=e.i(63059);let j=(0,l.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var v=e.i(81651);let y=(0,l.default)("images",[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]]);var N=e.i(46932),w=e.i(88653),k=e.i(57688),S=e.i(81310),C=e.i(52368);let D=(0,l.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),M=(0,l.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var E=e.i(64659);let $=(0,l.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),T=(0,l.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var K=e.i(48256);let L={nameKo:"",nameEn:"",spouseKo:"",spouseEn:"",parentId:""};function R(){let{data:e,language:a,setLanguage:n,addMember:l,updateMember:r,removeMember:o,getAllMembers:i}=(0,S.useFamilyTreeStore)(),[d,c]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),[b,p]=(0,s.useState)(L),[g,j]=(0,s.useState)(new Set(["god-father"])),[v,y]=(0,s.useState)(null);(0,s.useMemo)(()=>i(),[i,e]);let N=(e,s=0)=>{let n=g.has(e.id),l=e.children.length>0,r=x===e.id,o=e.name[a],i=e.spouse?.[a];return(0,t.jsxs)("div",{className:"select-none",children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 py-2 px-3 rounded-lg transition-colors ${r?"bg-amber-100":"hover:bg-stone-50"}`,style:{paddingLeft:`${20*s+12}px`},children:[(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void j(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"w-5 h-5 flex items-center justify-center text-stone-400 hover:text-stone-600",disabled:!l,children:l?n?(0,t.jsx)(E.ChevronDown,{className:"w-4 h-4"}):(0,t.jsx)(f.ChevronRight,{className:"w-4 h-4"}):(0,t.jsx)("div",{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-pink-100 flex items-center justify-center",children:i?(0,t.jsx)(T,{className:"w-4 h-4 text-pink-500"}):(0,t.jsx)($,{className:"w-4 h-4 text-pink-500"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("span",{className:"font-medium text-stone-700 truncate block",children:[o,i&&(0,t.jsxs)("span",{className:"text-stone-500",children:[" Â· ",i]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void(p({...L,parentId:t}),c(!0),h(null))},className:"p-1.5 text-stone-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"ìžë…€ ì¶”ê°€",children:(0,t.jsx)(D,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{p({nameKo:e.name.ko,nameEn:e.name.en,spouseKo:e.spouse?.ko||"",spouseEn:e.spouse?.en||"",parentId:""}),h(e.id),c(!1)},className:"p-1.5 text-stone-400 hover:text-amber-600 hover:bg-amber-50 rounded transition-colors",title:"ìˆ˜ì •",children:(0,t.jsx)(M,{className:"w-4 h-4"})}),"god-father"!==e.id&&(0,t.jsx)("button",{onClick:()=>y(e.id),className:"p-1.5 text-stone-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"ì‚­ì œ",children:(0,t.jsx)(m,{className:"w-4 h-4"})})]})]}),l&&n&&(0,t.jsx)("div",{className:"border-l-2 border-stone-200 ml-6",children:e.children.map(e=>N(e,s+1))})]},e.id)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-serif font-bold text-stone-800",children:"Family Tree Editor"}),(0,t.jsx)("p",{className:"text-sm text-stone-500 mt-1",children:"ê°€ì¡± êµ¬ì„±ì›ì„ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-stone-100 rounded-full p-1",children:[(0,t.jsxs)("button",{onClick:()=>n("ko"),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${"ko"===a?"bg-white text-stone-800 shadow-sm":"text-stone-500 hover:text-stone-700"}`,children:[(0,t.jsx)(K.Globe,{className:"w-3.5 h-3.5"}),"í•œêµ­ì–´"]}),(0,t.jsxs)("button",{onClick:()=>n("en"),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${"en"===a?"bg-white text-stone-800 shadow-sm":"text-stone-500 hover:text-stone-700"}`,children:[(0,t.jsx)(K.Globe,{className:"w-3.5 h-3.5"}),"EN"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-stone-50 rounded-xl p-4 border border-stone-200",children:[(0,t.jsx)("h3",{className:"font-semibold text-stone-700 mb-3 px-2",children:"ê°€ì¡± êµ¬ì„±ì› ëª©ë¡"}),(0,t.jsx)("div",{className:"max-h-[500px] overflow-y-auto",children:N(e.root)})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-stone-900 rounded-xl p-4 overflow-x-auto",children:[(0,t.jsx)("h3",{className:"text-xs text-stone-400 uppercase tracking-wider mb-3",children:"ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°"}),(0,t.jsx)("div",{className:"scale-75 origin-top-left",children:(0,t.jsx)(C.FamilyTree,{root:e.root,language:a})})]}),(d||x)&&(0,t.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200",children:[(0,t.jsxs)("h3",{className:"font-semibold text-amber-800 mb-4 flex items-center gap-2",children:[d?(0,t.jsx)(D,{className:"w-4 h-4"}):(0,t.jsx)(M,{className:"w-4 h-4"}),d?"ìƒˆ ê°€ì¡± êµ¬ì„±ì› ì¶”ê°€":"ê°€ì¡± êµ¬ì„±ì› ìˆ˜ì •"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-stone-600 mb-1",children:"ì´ë¦„ (í•œêµ­ì–´)"}),(0,t.jsx)("input",{type:"text",value:b.nameKo,onChange:e=>p({...b,nameKo:e.target.value}),className:"w-full px-3 py-2 border border-stone-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"í™ê¸¸ë™"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-stone-600 mb-1",children:"Name (English)"}),(0,t.jsx)("input",{type:"text",value:b.nameEn,onChange:e=>p({...b,nameEn:e.target.value}),className:"w-full px-3 py-2 border border-stone-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"Hong Gil-dong"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-stone-600 mb-1",children:"ë°°ìš°ìž (í•œêµ­ì–´)"}),(0,t.jsx)("input",{type:"text",value:b.spouseKo,onChange:e=>p({...b,spouseKo:e.target.value}),className:"w-full px-3 py-2 border border-stone-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"(ì„ íƒ)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-stone-600 mb-1",children:"Spouse (English)"}),(0,t.jsx)("input",{type:"text",value:b.spouseEn,onChange:e=>p({...b,spouseEn:e.target.value}),className:"w-full px-3 py-2 border border-stone-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"(Optional)"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,t.jsx)("button",{onClick:()=>{c(!1),h(null),p(L)},className:"px-4 py-2 text-stone-600 bg-white border border-stone-300 rounded-lg hover:bg-stone-50 transition-colors text-sm font-medium",children:"ì·¨ì†Œ"}),(0,t.jsxs)("button",{onClick:d?()=>{if(!b.nameKo.trim()||!b.nameEn.trim())return;let e={id:`member-${Date.now()}`,name:{ko:b.nameKo,en:b.nameEn},spouse:b.spouseKo.trim()?{ko:b.spouseKo,en:b.spouseEn}:null,children:[]};l(b.parentId,e),p(L),c(!1),j(e=>new Set([...e,b.parentId]))}:()=>{x&&b.nameKo.trim()&&b.nameEn.trim()&&(r(x,{name:{ko:b.nameKo,en:b.nameEn},spouse:b.spouseKo.trim()?{ko:b.spouseKo,en:b.spouseEn}:null}),h(null),p(L))},className:"px-4 py-2 text-white bg-amber-600 rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(u,{className:"w-4 h-4"}),"ì €ìž¥"]})]})]}),!d&&!x&&(0,t.jsxs)("div",{className:"bg-stone-100 rounded-xl p-4 text-center text-stone-500 text-sm",children:[(0,t.jsx)("p",{children:"ì™¼ìª½ ëª©ë¡ì—ì„œ êµ¬ì„±ì›ì„ ì„ íƒí•˜ì—¬ ìˆ˜ì •í•˜ê±°ë‚˜,"}),(0,t.jsx)("p",{className:"mt-1",children:"+ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìžë…€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”."})]})]})]}),v&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full shadow-xl",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-stone-800 mb-2",children:"ì‚­ì œ í™•ì¸"}),(0,t.jsx)("p",{className:"text-sm text-stone-600 mb-4",children:"ì´ êµ¬ì„±ì›ê³¼ ëª¨ë“  í•˜ìœ„ ìžë…€ë“¤ì´ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>y(null),className:"px-4 py-2 text-stone-600 bg-stone-100 rounded-lg hover:bg-stone-200 transition-colors text-sm font-medium",children:"ì·¨ì†Œ"}),(0,t.jsx)("button",{onClick:()=>{o(v),y(null)},className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"ì‚­ì œ"})]})]})})]})}var U=e.i(31628);let z=[{id:"nakibong-kimphilja",nameKo:"ë‚˜ê¸°ë´‰.ê¹€í•„ìž",nameEn:"Na Gi-bong & Kim Phil-ja",path:"/photo/nakibong-kimphilja"},{id:"najongchoon-jangmyungaei",nameKo:"ë‚˜ì¢…ì¶˜.ìž¥ëª…ì• ",nameEn:"Na Jong-choon & Jang Myeong-aei",path:"/photo/najongchoon-jangmyungaei"},{id:"najongseop-kimyangjin",nameKo:"ë‚˜ì¢…ì„­.ê¹€ì–‘ì§„",nameEn:"Na Jong-seop & Kim Yang-jin",path:"/photo/najongseop-kimyangjin"},{id:"nashinsuk-kimjinsu",nameKo:"ë‚˜ì‹ ìˆ™.ê¹€ì§„ìˆ˜",nameEn:"Na Shin-suk & Kim Jin-su",path:"/photo/nashinsuk-kimjinsu"},{id:"nahanna-jungkiwon",nameKo:"ë‚˜í•œë‚˜.ì •ê¸°ì›",nameEn:"Na Han-na & Jung Gi-won",path:"/photo/nahanna-jungkiwon"},{id:"nayohan-hyungjungsoon",nameKo:"ë‚˜ìš”í•œ.í˜•ì •ìˆœ",nameEn:"Na Yo-han & Hyeong Jeong-soon",path:"/photo/nayohan-hyungjungsoon"}],O=(0,l.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),A=(0,l.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),I=()=>{let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&(e+=2*localStorage[t].length);return{used:e,total:5242880,percentage:Math.round(e/5242880*100)}},P=(e,t=600)=>new Promise((s,a)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=e=>{let n=document.createElement("img");n.src=e.target?.result,n.onload=()=>{let e=document.createElement("canvas"),a=t/n.width,l=n.width>t?t:n.width,r=n.width>t?n.height*a:n.height;e.width=l,e.height=r;let o=e.getContext("2d");o?.drawImage(n,0,0,l,r),s(e.toDataURL("image/jpeg",.5))},n.onerror=e=>a(e)},n.onerror=e=>a(e)});function q(){let{data:e,addImage:a,removeImage:n,getImagesByCategory:l,reorderImages:r}=(0,U.useGalleryStore)(),[i,d]=(0,s.useState)("nakibong-kimphilja"),[c,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)([]),[f,j]=(0,s.useState)(!1),[v,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(null),[C,M]=(0,s.useState)({used:0,total:5242880,percentage:0}),[E,$]=(0,s.useState)(null),T=(0,s.useRef)(null),[K,L]=(0,s.useState)(null),[R,q]=(0,s.useState)(null),B=l(i),F=z.find(e=>e.id===i);(0,s.useEffect)(()=>{M(I())},[e]);let G=()=>{q(null)},H=()=>{L(null),q(null)},V=(0,s.useCallback)(async e=>{let t=Array.from(e).filter(e=>e.type.startsWith("image/"));if(0===t.length)return;let s=await Promise.all(t.map(async e=>({id:`preview-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,file:e,preview:URL.createObjectURL(e),title:e.name.replace(/\.[^/.]+$/,""),status:"pending"})));g(e=>[...e,...s])},[]),J=async()=>{if(0===p.length)return;N(!0),$(null);let e=0,t=!1;for(let s=0;s<p.length;s++){let n=p[s];if(t){g(e=>e.map(e=>e.id===n.id?{...e,status:"error"}:e));continue}g(e=>e.map(e=>e.id===n.id?{...e,status:"processing"}:e));try{let l=await P(n.file);try{a({category:i,src:l,title:n.title||void 0,order:B.length+s}),g(e=>e.map(e=>e.id===n.id?{...e,status:"done"}:e)),e++}catch(e){throw e instanceof Error&&e.message.includes("quota")&&(t=!0,$("ì €ìž¥ì†Œ ìš©ëŸ‰ì´ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤! ê¸°ì¡´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ê±°ë‚˜ Site Settingsì—ì„œ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•´ì£¼ì„¸ìš”.")),e}}catch(e){console.error("Image upload failed:",e),g(e=>e.map(e=>e.id===n.id?{...e,status:"error"}:e))}}N(!1),M(I()),e>0&&setTimeout(()=>{g(e=>(e.forEach(e=>{"done"===e.status&&URL.revokeObjectURL(e.preview)}),e.filter(e=>"done"!==e.status)))},1e3)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-serif font-bold text-stone-800",children:"Gallery Editor"}),(0,t.jsx)("p",{className:"text-sm text-stone-500 mt-1",children:"ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì‚¬ì§„ì„ ê´€ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."})]})}),(0,t.jsxs)("div",{className:"bg-stone-50 rounded-lg p-3 border border-stone-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,t.jsx)("span",{className:"text-stone-600",children:"ì €ìž¥ì†Œ ì‚¬ìš©ëŸ‰"}),(0,t.jsxs)("span",{className:`font-medium ${C.percentage>80?"text-red-600":"text-stone-700"}`,children:[(C.used/1048576).toFixed(2)," MB / ",(C.total/1048576).toFixed(0)," MB (",C.percentage,"%)"]})]}),(0,t.jsx)("div",{className:"w-full bg-stone-200 rounded-full h-2",children:(0,t.jsx)("div",{className:`h-2 rounded-full transition-all ${C.percentage>80?"bg-red-500":C.percentage>60?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min(C.percentage,100)}%`}})}),C.percentage>80&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"âš ï¸ ì €ìž¥ì†Œê°€ ê±°ì˜ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤! ê¸°ì¡´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•´ì£¼ì„¸ìš”."})]}),E&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,t.jsx)(b.X,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-red-800",children:E}),(0,t.jsx)("button",{onClick:()=>$(null),className:"text-xs text-red-600 hover:text-red-800 mt-1",children:"ë‹«ê¸°"})]})]}),(0,t.jsxs)("div",{className:"bg-stone-50 rounded-xl p-4 border border-stone-200",children:[(0,t.jsxs)("h3",{className:"font-semibold text-stone-700 mb-3 flex items-center gap-2",children:[(0,t.jsx)(O,{className:"w-4 h-4"}),"ì¹´í…Œê³ ë¦¬ ì„ íƒ"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:z.map(e=>{let s=l(e.id).length;return(0,t.jsxs)("button",{onClick:()=>d(e.id),className:`px-4 py-3 rounded-lg text-left transition-colors ${i===e.id?"bg-amber-500 text-white":"bg-white border border-stone-200 text-stone-700 hover:bg-amber-50"}`,children:[(0,t.jsx)("span",{className:"block font-medium text-sm",children:e.nameKo}),(0,t.jsxs)("span",{className:"block text-xs opacity-75 mt-1",children:[s,"ìž¥"]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-stone-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-stone-700",children:[F?.nameKo," ì‚¬ì§„ ëª©ë¡ (",B.length,"ìž¥)"]}),(0,t.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors text-sm font-medium",children:[(0,t.jsx)(D,{className:"w-4 h-4"}),"ì‚¬ì§„ ì¶”ê°€"]})]}),c&&(0,t.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h4",{className:"font-semibold text-amber-800 flex items-center gap-2",children:[(0,t.jsx)(y,{className:"w-4 h-4"}),"ë‹¤ì¤‘ ì‚¬ì§„ ì—…ë¡œë“œ"]}),(0,t.jsx)("button",{onClick:()=>{p.forEach(e=>URL.revokeObjectURL(e.preview)),g([]),h(!1)},className:"p-1 text-stone-400 hover:text-stone-600",children:(0,t.jsx)(b.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:()=>j(!1),onDrop:e=>{e.preventDefault(),j(!1),e.dataTransfer.files&&V(e.dataTransfer.files)},className:`
                                relative h-32 w-full rounded-xl border-2 border-dashed transition-all flex flex-col items-center justify-center gap-2 cursor-pointer
                                ${f?"border-amber-500 bg-amber-100":"border-stone-300 hover:border-amber-400 hover:bg-white"}
                            `,children:[(0,t.jsx)("input",{ref:T,type:"file",accept:"image/*",multiple:!0,onChange:e=>{e.target.files&&(V(e.target.files),e.target.value="")},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,t.jsx)(o,{className:`w-8 h-8 ${f?"text-amber-500":"text-stone-400"}`}),(0,t.jsxs)("p",{className:"text-sm text-stone-600",children:[(0,t.jsx)("span",{className:"font-medium text-amber-600",children:"í´ë¦­"})," ë˜ëŠ” ",(0,t.jsx)("span",{className:"font-medium",children:"ì—¬ëŸ¬ íŒŒì¼ ë“œëž˜ê·¸"})]}),(0,t.jsx)("p",{className:"text-xs text-stone-400",children:"PNG, JPG, GIF (ìµœëŒ€ 5MB/íŒŒì¼)"})]}),p.length>0&&(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-stone-700",children:[p.length,"ê°œ íŒŒì¼ ì„ íƒë¨"]}),(0,t.jsx)("button",{onClick:()=>{p.forEach(e=>URL.revokeObjectURL(e.preview)),g([])},className:"text-xs text-stone-500 hover:text-red-500",children:"ì „ì²´ ì‚­ì œ"})]}),(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2 pr-1",children:p.map(e=>(0,t.jsxs)("div",{className:`flex items-center gap-3 p-2 bg-white rounded-lg border ${"done"===e.status?"border-green-300 bg-green-50":"error"===e.status?"border-red-300 bg-red-50":"processing"===e.status?"border-amber-300 bg-amber-50":"border-stone-200"}`,children:[(0,t.jsx)("div",{className:"w-12 h-12 relative flex-shrink-0 rounded overflow-hidden bg-stone-100",children:(0,t.jsx)(k.default,{src:e.preview,alt:e.title,fill:!0,className:"object-cover"})}),(0,t.jsx)("input",{type:"text",value:e.title,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void g(e=>e.map(e=>e.id===s?{...e,title:a}:e))},placeholder:"ì œëª© ìž…ë ¥",disabled:"pending"!==e.status,className:"flex-1 px-2 py-1 text-sm border border-stone-200 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent disabled:bg-stone-100"}),"processing"===e.status&&(0,t.jsx)(A,{className:"w-5 h-5 text-amber-500 animate-spin"}),"done"===e.status&&(0,t.jsx)(x,{className:"w-5 h-5 text-green-500"}),"error"===e.status&&(0,t.jsx)(b.X,{className:"w-5 h-5 text-red-500"}),"pending"===e.status&&(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void g(e=>{let s=e.find(e=>e.id===t);return s&&URL.revokeObjectURL(s.preview),e.filter(e=>e.id!==t)})},className:"p-1 text-stone-400 hover:text-red-500",children:(0,t.jsx)(m,{className:"w-4 h-4"})})]},e.id))}),(0,t.jsx)("button",{onClick:J,disabled:v||p.every(e=>"pending"!==e.status),className:"w-full py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A,{className:"w-4 h-4 animate-spin"}),"ì—…ë¡œë“œ ì¤‘..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{className:"w-4 h-4"}),p.filter(e=>"pending"===e.status).length,"ê°œ íŒŒì¼ ì—…ë¡œë“œ"]})})]})]}),B.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-xs text-stone-400 mb-2",children:"ðŸ“Œ ë“œëž˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:B.map((e,s)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:()=>{L(s)},onDragOver:e=>{e.preventDefault(),q(s)},onDragLeave:G,onDrop:()=>(e=>{if(null!==K&&K!==e){let t=[...B],[s]=t.splice(K,1);t.splice(e,0,s),r(i,t.map(e=>e.id))}L(null),q(null)})(s),onDragEnd:H,className:`relative group aspect-square bg-stone-100 rounded-lg overflow-hidden border-2 transition-all cursor-move
                                        ${K===s?"opacity-50 scale-95":""}
                                        ${R===s&&K!==s?"border-amber-500 border-4 scale-105":"border-stone-200"}
                                    `,children:[(0,t.jsx)(k.default,{src:e.src,alt:e.title||"ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€",fill:!0,className:"object-cover pointer-events-none",unoptimized:e.src.startsWith("data:")}),(0,t.jsx)("div",{className:"absolute top-2 left-2 w-6 h-6 bg-black/60 rounded-full flex items-center justify-center text-white text-xs font-bold",children:s+1}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:(0,t.jsx)("button",{onClick:()=>S(e.id),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:(0,t.jsx)(m,{className:"w-4 h-4"})})}),e.title&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/60 to-transparent",children:(0,t.jsx)("span",{className:"text-white text-xs truncate block",children:e.title})})]},e.id))})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-stone-500",children:[(0,t.jsx)("p",{children:"ë“±ë¡ëœ ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤."}),(0,t.jsx)("p",{className:"text-sm mt-1",children:'ìœ„ì˜ "ì‚¬ì§„ ì¶”ê°€" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì‚¬ì§„ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.'})]})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full shadow-xl",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-stone-800 mb-2",children:"ì‚­ì œ í™•ì¸"}),(0,t.jsx)("p",{className:"text-sm text-stone-600 mb-4",children:"ì´ ì‚¬ì§„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>S(null),className:"px-4 py-2 text-stone-600 bg-stone-100 rounded-lg hover:bg-stone-200 transition-colors text-sm font-medium",children:"ì·¨ì†Œ"}),(0,t.jsx)("button",{onClick:()=>{n(w),S(null)},className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"ì‚­ì œ"})]})]})})]})}function B({isOpen:e,onClose:s,onConfirm:a,title:n,message:l,confirmText:r="Confirm",cancelText:o="Cancel",variant:i="danger"}){if(!e)return null;let d={danger:{icon:"text-red-500",button:"bg-red-600 hover:bg-red-700",iconBg:"bg-red-100"},warning:{icon:"text-amber-500",button:"bg-amber-600 hover:bg-amber-700",iconBg:"bg-amber-100"},info:{icon:"text-blue-500",button:"bg-blue-600 hover:bg-blue-700",iconBg:"bg-blue-100"}}[i];return(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,t.jsx)(N.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,t.jsxs)(N.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 z-10",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:`p-3 rounded-full ${d.iconBg}`,children:(0,t.jsx)(p,{className:`w-6 h-6 ${d.icon}`})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-stone-800 mb-1",children:n}),(0,t.jsx)("p",{className:"text-sm text-stone-600",children:l})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 bg-stone-100 text-stone-700 rounded-lg hover:bg-stone-200 transition-colors font-medium",children:o}),(0,t.jsx)("button",{type:"button",onClick:()=>{a(),s()},className:`px-4 py-2 text-white rounded-lg transition-colors font-medium ${d.button}`,children:r})]})]})]})}function F({isOpen:e,onClose:s,title:a,message:n,variant:l="info"}){if(!e)return null;let r={success:{icon:(0,t.jsx)(x,{className:"w-6 h-6 text-green-500"}),iconBg:"bg-green-100"},error:{icon:(0,t.jsx)(b.X,{className:"w-6 h-6 text-red-500"}),iconBg:"bg-red-100"},info:{icon:(0,t.jsx)(p,{className:"w-6 h-6 text-blue-500"}),iconBg:"bg-blue-100"}}[l];return(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,t.jsx)(N.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,t.jsxs)(N.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 z-10",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:`p-3 rounded-full ${r.iconBg}`,children:r.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-stone-800 mb-1",children:a}),(0,t.jsx)("p",{className:"text-sm text-stone-600",children:n})]})]}),(0,t.jsx)("div",{className:"flex justify-end mt-6",children:(0,t.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors font-medium",children:"OK"})})]})]})}function G(){let[e,l]=(0,s.useState)("story-upload"),[i,d]=(0,s.useState)(!1);return(0,t.jsxs)(a.ContentLayout,{title:"Site Manager",description:"ì›¹ì‚¬ì´íŠ¸ ì½˜í…ì¸ ì™€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.",headerImage:"/images/common/top-imgs/05-upload.png",children:[(0,t.jsx)(B,{isOpen:i,onClose:()=>d(!1),onConfirm:()=>{n.useStoryStore.getState().clearAllStories(),d(!1),window.location.reload()},title:"Reset All Data?",message:"WARNING: This will delete ALL your uploaded stories and reset to default data. This action cannot be undone.",confirmText:"Reset",cancelText:"Cancel",variant:"danger"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 min-h-[600px]",children:[(0,t.jsx)("aside",{className:"w-full md:w-64 flex-shrink-0",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden sticky top-24",children:[(0,t.jsx)("div",{className:"p-4 bg-stone-50 border-b border-stone-200",children:(0,t.jsx)("h2",{className:"font-serif font-bold text-stone-700",children:"Management"})}),(0,t.jsxs)("nav",{className:"p-2 space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>l("story-upload"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${"story-upload"===e?"bg-amber-50 text-amber-800 font-medium":"text-stone-600 hover:bg-stone-50"}`,children:[(0,t.jsx)(o,{className:"w-5 h-5"}),"Story Upload"]}),(0,t.jsxs)("button",{onClick:()=>l("site-settings"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${"site-settings"===e?"bg-amber-50 text-amber-800 font-medium":"text-stone-600 hover:bg-stone-50"}`,children:[(0,t.jsx)(r,{className:"w-5 h-5"}),"Site Settings"]}),(0,t.jsxs)("button",{onClick:()=>l("family-tree"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${"family-tree"===e?"bg-amber-50 text-amber-800 font-medium":"text-stone-600 hover:bg-stone-50"}`,children:[(0,t.jsx)(v.TreeDeciduous,{className:"w-5 h-5"}),"Family Tree"]}),(0,t.jsxs)("button",{onClick:()=>l("gallery"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${"gallery"===e?"bg-amber-50 text-amber-800 font-medium":"text-stone-600 hover:bg-stone-50"}`,children:[(0,t.jsx)(y,{className:"w-5 h-5"}),"Gallery"]})]})]})}),(0,t.jsx)("main",{className:"flex-1 bg-white rounded-xl shadow-sm border border-stone-200 p-6 md:p-8",children:(0,t.jsxs)(w.AnimatePresence,{mode:"wait",children:["story-upload"===e&&(0,t.jsxs)(N.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[(0,t.jsxs)("h2",{className:"text-2xl font-serif font-bold text-stone-800 mb-6 flex items-center gap-2",children:[(0,t.jsx)(o,{className:"w-6 h-6 text-amber-600"}),"New Story Post"]}),(0,t.jsx)(H,{})]},"story-upload"),"site-settings"===e&&(0,t.jsx)(N.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-8",children:(0,t.jsxs)("div",{className:"p-6 bg-red-50 rounded-xl border border-red-100",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-red-800 mb-2",children:"Danger Zone"}),(0,t.jsx)("p",{className:"text-sm text-red-600 mb-4",children:"If you are experiencing issues with data saving or errors, you can reset all story data to the initial state. This will delete all custom uploaded stories."}),(0,t.jsx)("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-600 hover:text-white transition-colors text-sm font-medium",children:"Reset All Data"})]})},"site-settings"),"family-tree"===e&&(0,t.jsx)(N.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:(0,t.jsx)(R,{})},"family-tree"),"gallery"===e&&(0,t.jsx)(N.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:(0,t.jsx)(q,{})},"gallery")]})})]})]})}function H(){let{addStory:e,stories:a,removeStory:l,updateStory:r,reorderStories:o}=(0,n.useStoryStore)(),[x,p]=(0,s.useState)("text"),[v,y]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[k,S]=(0,s.useState)(""),[C,D]=(0,s.useState)(new Date().toISOString().split("T")[0]),[M,E]=(0,s.useState)(""),[$,T]=(0,s.useState)(""),[K,L]=(0,s.useState)("/images/donates/card-01.png"),[R,U]=(0,s.useState)(null),[z,O]=(0,s.useState)({isOpen:!1,title:"",message:"",variant:"info"}),[A,I]=(0,s.useState)(1),P=Math.ceil(a.length/5),q=a.slice((A-1)*5,5*A),[G,H]=(0,s.useState)(null),[J,X]=(0,s.useState)(null),[W,Y]=(0,s.useState)(null),Z=()=>{Y(null)},_=()=>{X(null),Y(null)},Q=()=>{H(null),p("text"),y(""),w(""),S(""),E(""),T(""),L("/images/donates/card-01.png"),D(new Date().toISOString().split("T")[0])};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(B,{isOpen:null!==R,onClose:()=>U(null),onConfirm:()=>{null!==R&&(l(R),U(null))},title:"Delete Story?",message:"This action cannot be undone. Are you sure you want to delete this story?",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}),(0,t.jsx)(F,{isOpen:z.isOpen,onClose:()=>O(e=>({...e,isOpen:!1})),title:z.title,message:z.message,variant:z.variant}),(0,t.jsxs)("form",{onSubmit:t=>{t.preventDefault();let s={type:x,title:v,content:N,description:k,date:C.replace(/-/g,"."),author:"quote"===x?M:void 0,videoId:"video"===x?$:void 0,src:"image"===x?K:void 0,color:"text"===x?"bg-amber-50":"quote"===x?"bg-slate-800 text-white":void 0};try{null!==G?(r(G,s),O({isOpen:!0,title:"Updated!",message:"Story has been updated successfully.",variant:"success"})):(e(s),O({isOpen:!0,title:"Success!",message:"Story has been saved successfully.",variant:"success"})),Q()}catch(e){console.error(e),O({isOpen:!0,title:"Storage Full",message:"Failed to save story. Please delete old items or clear data.",variant:"error"})}},className:"space-y-6 max-w-2xl",children:[(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:[{id:"text",icon:d,label:"Text"},{id:"image",icon:i.Image,label:"Photo"},{id:"video",icon:c.Video,label:"Video"},{id:"quote",icon:h.Quote,label:"Quote"}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>p(e.id),className:`flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${x===e.id?"border-amber-500 bg-amber-50 text-amber-700":"border-stone-100 bg-stone-50 text-stone-400 hover:bg-stone-100"}`,children:[(0,t.jsx)(e.icon,{className:"w-6 h-6 mb-2"}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase",children:e.label})]},e.id))}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Title"}),(0,t.jsx)("input",{required:!0,type:"text",className:"w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none text-black",value:v,onChange:e=>y(e.target.value),placeholder:"Enter story title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Date"}),(0,t.jsx)("input",{type:"date",className:"w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-amber-500 outline-none text-black",value:C,onChange:e=>D(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-4 p-6 bg-stone-50 rounded-xl border border-stone-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"video"===x?"Description":"Content"}),(0,t.jsx)("textarea",{required:!0,rows:"quote"===x?3:6,className:"w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-amber-500 outline-none text-black",value:"video"===x?k:N,onChange:e=>"video"===x?S(e.target.value):w(e.target.value),placeholder:"video"===x?"Describe the video...":"Write your story here..."})]}),"quote"===x&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Author / Source"}),(0,t.jsx)("input",{required:!0,type:"text",className:"w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-amber-500 outline-none text-black",value:M,onChange:e=>E(e.target.value),placeholder:"e.g. Grandfather's Diary"})]}),"video"===x&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"YouTube Video URL or ID"}),(0,t.jsx)("input",{required:!0,type:"text",className:"w-full px-4 py-2 rounded-lg border border-stone-300 focus:ring-2 focus:ring-amber-500 outline-none font-mono text-sm text-black",value:$,onChange:e=>{let t=e.target.value;for(let e of[/(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/v\/)([a-zA-Z0-9_-]{11})/]){let s=t.match(e);if(s)return void T(s[1])}T(t)},placeholder:"URL ë˜ëŠ” ID (ì˜ˆ: M7lc1UVf-VE)"}),(0,t.jsx)("p",{className:"text-xs text-stone-500 mt-1",children:"ì „ì²´ YouTube URLì„ ë¶™ì—¬ë„£ìœ¼ë©´ ìžë™ìœ¼ë¡œ IDê°€ ì¶”ì¶œë©ë‹ˆë‹¤."}),$&&11===$.length&&(0,t.jsxs)("div",{className:"mt-4 relative rounded-lg overflow-hidden border border-stone-200 shadow-sm",children:[(0,t.jsxs)("div",{className:"aspect-video relative bg-stone-100",children:[(0,t.jsx)("img",{src:`https://img.youtube.com/vi/${$}/hqdefault.jpg`,alt:"YouTube Thumbnail Preview",className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)("div",{className:"w-0 h-0 border-t-8 border-t-transparent border-l-[14px] border-l-white border-b-8 border-b-transparent ml-1"})})})]}),(0,t.jsx)("div",{className:"p-2 bg-white text-center",children:(0,t.jsx)("span",{className:"text-xs text-stone-500",children:"Thumbnail Preview"})})]})]}),"image"===x&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Image Upload"}),(0,t.jsx)(V,{value:K,onChange:L})]})]}),(0,t.jsxs)("div",{className:"pt-4 flex gap-3",children:[null!==G&&(0,t.jsxs)("button",{type:"button",onClick:Q,className:"flex-1 bg-stone-200 text-stone-700 py-3 rounded-lg hover:bg-stone-300 transition-colors flex items-center justify-center gap-2 font-medium",children:[(0,t.jsx)(b.X,{className:"w-4 h-4"}),"Cancel Edit"]}),(0,t.jsxs)("button",{type:"submit",className:`${null!==G?"flex-1":"w-full"} bg-stone-800 text-white py-3 rounded-lg hover:bg-stone-900 transition-colors flex items-center justify-center gap-2 font-medium`,children:[(0,t.jsx)(u,{className:"w-4 h-4"}),null!==G?"Update Story":"Save Story"]})]})]}),null!==G&&(0,t.jsxs)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-center gap-3",children:[(0,t.jsx)(j,{className:"w-5 h-5 text-amber-600"}),(0,t.jsx)("span",{className:"text-amber-800 font-medium",children:'Editing mode: Modify the form above and click "Update Story" to save changes.'})]}),(0,t.jsxs)("div",{className:"mt-12 pt-8 border-t border-stone-200",children:[(0,t.jsxs)("h3",{className:"font-serif font-bold text-lg mb-4 text-stone-700",children:["Recent Stories (",a.length,")",(0,t.jsx)("span",{className:"text-xs font-normal text-stone-400 ml-2",children:"ë“œëž˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½"})]}),(0,t.jsx)("div",{className:"space-y-2",children:q.map((e,s)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:()=>{X(s)},onDragOver:e=>{e.preventDefault(),Y(s)},onDragLeave:Z,onDrop:()=>{null!==J&&J!==s&&o((A-1)*5+J,(A-1)*5+s),X(null),Y(null)},onDragEnd:_,className:`flex items-center justify-between p-3 bg-white border rounded-lg shadow-sm transition-all cursor-move
                                ${G===e.id?"border-amber-400 bg-amber-50":"border-stone-100"}
                                ${J===s?"opacity-50 scale-95":""}
                                ${W===s&&J!==s?"border-amber-500 border-2 bg-amber-50":""}
                            `,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-stone-300 hover:text-stone-500 cursor-grab active:cursor-grabbing",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M8 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm8-12a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"})})}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase w-12 text-stone-400",children:e.type}),(0,t.jsx)("span",{className:"text-sm font-medium text-stone-800 truncate max-w-[200px]",children:e.title||e.content.slice(0,20)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{H(e.id),p(e.type),y(e.title),w(e.content),S(e.description||""),E(e.author||""),T(e.videoId||""),L(e.src||"/images/donates/card-01.png"),D(e.date.replace(/\./g,"-"))},className:"text-stone-400 hover:text-amber-600 p-1",title:"Edit",children:(0,t.jsx)(j,{className:"w-4 h-4"})}),(0,t.jsx)("button",{type:"button",onClick:()=>U(e.id),className:"text-stone-400 hover:text-red-500 p-1",title:"Delete",children:(0,t.jsx)(m,{className:"w-4 h-4"})})]})]},e.id))}),P>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>I(e=>Math.max(e-1,1)),disabled:1===A,className:"p-2 rounded-lg bg-stone-100 text-stone-600 hover:bg-stone-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)(g.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:P},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>I(e),className:`w-8 h-8 rounded-lg text-sm font-medium transition-colors ${A===e?"bg-amber-500 text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:e},e))}),(0,t.jsx)("button",{type:"button",onClick:()=>I(e=>Math.min(e+1,P)),disabled:A===P,className:"p-2 rounded-lg bg-stone-100 text-stone-600 hover:bg-stone-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)(f.ChevronRight,{className:"w-5 h-5"})})]})]})]})}function V({value:e,onChange:a}){let[n,l]=(0,s.useState)(!1),[r,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),u=async e=>{let t=Array.from(e).filter(e=>e.type.startsWith("image/"));if(0!==t.length){c(!0);try{let e=await Promise.all(t.map(async e=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,dataUrl:await new Promise((t,s)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=e=>{let a=document.createElement("img");a.src=e.target?.result,a.onload=()=>{let e=document.createElement("canvas"),s=800/a.width,n=a.width>800?800:a.width,l=a.width>800?a.height*s:a.height;e.width=n,e.height=l;let r=e.getContext("2d");r?.drawImage(a,0,0,n,l),t(e.toDataURL("image/jpeg",.7))},a.onerror=e=>s(e)},a.onerror=e=>s(e)}),file:e})));i(t=>[...t,...e])}catch(e){console.error("Image processing failed:",e),alert("ì´ë¯¸ì§€ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}c(!1)}};return e&&"/images/donates/card-01.png"!==e?(0,t.jsxs)("div",{className:"relative aspect-video w-full rounded-xl overflow-hidden border border-stone-200 group",children:[(0,t.jsx)(k.default,{src:e,alt:"Preview",fill:!0,className:"object-contain bg-stone-100"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>a("/images/donates/card-01.png"),className:"p-2 bg-white rounded-full text-red-500 hover:bg-red-50 transition-colors",children:(0,t.jsx)(m,{className:"w-6 h-6"})})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:e=>{e.preventDefault(),l(!1),e.dataTransfer.files&&u(e.dataTransfer.files)},className:`
                    relative h-40 w-full rounded-xl border-2 border-dashed transition-all flex flex-col items-center justify-center gap-3 cursor-pointer
                    ${n?"border-amber-500 bg-amber-50":"border-stone-300 hover:border-amber-400 hover:bg-stone-50"}
                `,children:[(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>e.target.files&&u(e.target.files),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,t.jsx)("div",{className:"p-3 bg-white rounded-full shadow-sm",children:d?(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}):(0,t.jsx)(o,{className:`w-8 h-8 ${n?"text-amber-500":"text-stone-400"}`})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-medium text-stone-700 text-sm",children:"í´ë¦­ ë˜ëŠ” ë“œëž˜ê·¸í•˜ì—¬ ì—…ë¡œë“œ"}),(0,t.jsx)("p",{className:"text-xs text-stone-400 mt-1",children:"ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤ (ìµœëŒ€ 5MB)"})]})]}),r.length>0&&(0,t.jsxs)("div",{className:"bg-stone-50 rounded-xl p-3 border border-stone-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-stone-700",children:[r.length,"ê°œ ì´ë¯¸ì§€ ì„ íƒë¨ - ì‚¬ìš©í•  ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ì„¸ìš”"]}),(0,t.jsx)("button",{type:"button",onClick:()=>i([]),className:"text-xs text-stone-500 hover:text-red-500",children:"ì „ì²´ ì‚­ì œ"})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:r.map(e=>(0,t.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden border-2 border-stone-200 group cursor-pointer hover:border-amber-500 transition-colors",onClick:()=>{a(e.dataUrl),i([])},children:[(0,t.jsx)(k.default,{src:e.dataUrl,alt:"Preview",fill:!0,className:"object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)(x,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("button",{type:"button",onClick:t=>{var s;t.stopPropagation(),s=e.id,i(e=>e.filter(e=>e.id!==s))},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(b.X,{className:"w-3 h-3"})})]},e.id))})]})]})}e.s(["default",()=>G],99686)}]);